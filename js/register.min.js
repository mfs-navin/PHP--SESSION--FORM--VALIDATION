$(document).ready(function(){

//Name
$('#name').keyup( function (){

  var input = $(this);
  var is_name = input.val();

  if(is_name.length < 3)
  {
    input.removeClass("valid").addClass("invalid");
    input.next().removeClass("error").addClass("error_show").text("Should be more than 3 Characters");
  }

  else if(is_name.length>=3)
  {
    if (/^[A-Za-z ]+$/.test(is_name)) 
    {
      input.removeClass("invalid").addClass("valid");
      input.next().removeClass("error_show").addClass("error");
    }

    else{
      input.removeClass("valid").addClass("invalid");
      input.next().removeClass("error").addClass("error_show").text("Should not contain any number");
    }
    
  }

  else
  {
    input.removeClass("valid").addClass("invalid");
    input.next().removeClass("error").addClass("error_show").text("Should be less than 10 Characters");

  }

});

//Email
$('#email').keyup( function() {
  var input=$(this);
  var re = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
  var is_email=re.test(input.val());
  if(is_email)
  {
    input.removeClass("invalid").addClass("valid");
    input.next().removeClass('error_show').addClass('error');
  }

  else
  {
    input.removeClass("valid").addClass("invalid");
    input.next().removeClass('error').addClass('error_show');
  }
});


//Contact Number
$('#phone').keyup( function() 
{
  var input = $(this);
  var is_phone = input.val();
 
  
  if(is_phone.match(/^[0-9]+$/) == null)
  {
    input.removeClass("valid").addClass("invalid");
    input.next().removeClass('error').addClass('error_show').text("There should be only numbers");
  }

  else if( is_phone.length != 10)
  {
    input.removeClass("valid").addClass("invalid");
    input.next().removeClass('error').addClass('error_show').text("Contact number should be of 10 digits");
  }

  else
  {

    input.removeClass("invalid").addClass("valid");
    input.next().removeClass("error_show").addClass("error");
  }

});


//Address
$('#addr').keyup( function (){

  var input = $(this);
  var is_name = input.val();
  if(is_name.length < 10)
  {
    input.removeClass("valid").addClass("invalid");
    input.next().removeClass('error').addClass('error_show').text("Should be more than 10 Characters");
  }

  else
  {
    if (is_name.match(/^[a-zA-Z0-9-\/] ?([a-zA-Z0-9-\/]|[a-zA-Z0-9-\/] )*[a-zA-Z0-9-\/]$/)!=null) {
      input.removeClass("invalid").addClass("valid");
      input.next().removeClass("error_show").addClass("error");
    }

    else{
      input.removeClass("valid").addClass("invalid");
      input.next().removeClass('error').addClass('error_show').text("Should be alphanumberic.");
    }
    
  }

});


//Educational Qualification
$('#education').change(function() {

  var education = $(this);
  var education_value = education.val();

  if( education_value == 0)
  {
   
    education.removeClass("valid").addClass("invalid");
    education.next().removeClass("error").addClass("error_show");
  }

  else
  {

    education.removeClass("invalid").addClass("valid");
    education.next().removeClass("error_show").addClass("error");
  }

});

//About
$('#about').keyup( function () {
var about = $(this);
var is_about = about.val();

if( is_about.length >= 10)
{
  about.removeClass("invalid").addClass("valid");
  about.next().removeClass("error_show").addClass("error");
}

else
{
  about.removeClass("valid").addClass("invalid");
  about.next().removeClass("error").addClass("error_show").text("Should be more than 10 Characters");
}

});

//Professional Links
$("#linkedin").keyup( function () {

var link = $(this);
var is_link = link.val();

if( is_link.match(/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&@#\/%?=~_|!:,.;]*[-a-z0-9+&@#\/%=~_|]/i)==null)
{
  link.removeClass("valid").addClass("invalid");
  link.next().removeClass("error").addClass("error_show").text("Enter a valid URL");
}
else{
  link.removeClass("invalid").addClass("valid");
  link.next().removeClass("error_show").addClass("error");
}
});

$("#github").keyup( function () {

var link = $(this);
var is_link = link.val();

if( is_link.match(/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&@#\/%?=~_|!:,.;]*[-a-z0-9+&@#\/%=~_|]/i)==null)
{
  link.removeClass("valid").addClass("invalid");
  link.next().removeClass("error").addClass("error_show").text("Enter a valid URL");
}
else
{
  link.removeClass("invalid").addClass("valid");
  link.next().removeClass("error_show").addClass("error");
}
});

$("#upload").click(function(event){

  
  $(this).data('clicked', true);
  console.log($('#upload').data('clicked'));

var file = $("#profile_pic")[0].files;
console.log(file);

if (file["length"]>0){
  var fileType = file[0]["type"];
console.log(fileType);
var validImageTypes = ["image/gif", "image/jpeg", "image/png"];

if ($("#profile_pic").val()) {
  if ($.inArray(fileType, validImageTypes) < 0) {
    $("#profile_pic").removeClass('valid').addClass('invalid');
    $("#upload").next().removeClass('error').addClass('error_show').text('Please select only an image with format gif, jpeg, jpg or png');
}
  else{
    $("#profile_pic").removeClass('invalid').addClass('valid');
    $("#upload").next().removeClass('error_show').addClass('error');

    alert('Uploaded');
  }
}
}
});




$("#register").click(function(event){

  

  var skip_error = true;
  

  var gender_check = false;

  if($("input:radio[name='gender']").is(":checked")){
    console.log('checked');
    gender_check = true;
    $("#error_gender").removeClass('error_show').addClass('error');
    
  }
  else{
    console.log('not checked');
    skip_error = false;
    $("#error_gender").removeClass('error').addClass('error_show');
    
  }

  // Skills

  var skill_check = false;
  if( $("#skill_checkbox input[name='skills[]']:checked").length !=0)
  {
    skill_check = true;
    $("#error_checkbox").removeClass('error_show').addClass('error');
  }

  else{
    
    skip_error = false;
    $("#error_checkbox").removeClass('error').addClass('error_show');

  }


  //File Validation
if($('#upload').data('clicked')) {
    console.log('clicked');
}
else{
  $("#profile_pic").removeClass("valid").addClass("invalid");
  $("#upload").next().removeClass('error').addClass('error_show').text('Please select an image to upload.');

}



// Validation on submit
  var form_data=$("#signup").serializeArray();
  

  var error_free=true;


  for (var input in form_data){
    var element=$('#'+form_data[input]['name']);
    console.log(form_data[input]['name']);
    if (form_data[input]['name']=="skills[]") {
      alert("skill_check error");
      if (skill_check == true) {
        continue;
      }
    }
    if (form_data[input]['name']=='gender') {
      if (gender_check == true) {
        continue;
      }
    }
    var valid=element.hasClass("valid");
    var error_element=$("span", element.parent());
    if (!valid){error_element.removeClass("error").addClass("error_show"); error_free=false;}
    if(error_free==false){
    console.log(element);
    }

    
    else{error_element.removeClass("error_show").addClass("error");}
    
  }
  console.log(!error_free, !skip_error);
  if (!error_free){
    console.log("error_show");
    event.preventDefault();
  }
  else if (!skip_error){
    console.log("error_show_skip");
    return false;
  }

  else{
    alert('submitted');
  }

});
});